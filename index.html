<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Short Report Trainer</title>
<style>
  body { font-family: Arial, sans-serif; background:#f6f7fb; margin:0; }
  main { max-width:980px; margin:auto; padding:20px; }
  .card { background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 14px rgba(0,0,0,.1); }
  .grid { display:grid; grid-template-columns:1.2fr 1fr; gap:20px; }
  @media (max-width: 900px){ .grid { grid-template-columns: 1fr; } }
  img { width:100%; border-radius:10px; border:1px solid #e5e7eb; }
  label { font-weight:bold; display:block; margin-top:10px; }
  input, textarea { width:100%; padding:10px; margin-top:6px; border-radius:10px; border:1px solid #d1d5db; }
  textarea { min-height:90px; resize:vertical; }
  button { margin-top:15px; padding:10px 14px; background:#2563eb; color:white; border:none; border-radius:10px; cursor:pointer; }
  button:disabled { opacity:.6; cursor:not-allowed; }
  .hint { font-size:13px; color:#555; margin-top:8px; line-height:1.35; }
  .ok { color:#065f46; font-weight:bold; }
  .warn { color:#92400e; font-weight:bold; }
</style>
</head>

<body>
<main>
  <div class="card">
    <h2>Short Report Exercise</h2>
    <div class="hint">
      Fill in the short report in English. Use short, factual phrases.
    </div>

    <div class="grid">
      <div>
        <img id="scenarioImg" src="images/img1.jpg" alt="Scenario image">
        <p class="hint">
          <b>Location:</b> <span id="givenLocation">Central Station – Entrance A</span><br>
          <b>Time:</b> <span id="givenTime">14:35</span>
        </p>
      </div>

      <form id="reportForm">
        <!-- OPTIONAL: scenario id to store which picture they had -->
        <input type="hidden" id="scenarioId" value="S1">

        <label>Student name</label>
        <input id="studentName" required>

        <label>WHO – Who is reporting?</label>
        <input id="who" required>

        <label>WHAT – Main group (and sub group if necessary), Color, Size, Text.</label>
        <input id="what" required>

        <label>WHERE – Coordinate / Location</label>
        <input id="where" required>

        <label>WHEN – Date time group</label>
        <input id="when" required>

        <label>HOW – Approach, markings, contactperson</label>
        <input id="how" required>

        <label>NOTE – Additional information</label>
        <textarea id="note" required></textarea>

        <button id="submitBtn" type="submit">Submit</button>
        <div class="hint" id="msg"></div>
      </form>
    </div>
  </div>
</main>

<script>
/**
 * ====== 1) VUL JE FORM ID IN ======
 * Je Form link is: https://docs.google.com/forms/d/e/FORM_ID/viewform
 */
const FORM_ID = "1FAIpQLSe3-GOHTC225b7tcRCHNH5xK9X0lNplRsGfmlQcL_1pMVhcqA";

/**
 * ====== 2) KOPPEL HIER JOUW entry IDs ======
 * Gebruik "Get pre-filled link" in Google Forms om de entry.xxxxx te vinden.
 */
const ENTRY = {
  studentName: "entry.697813513",
  who:         "entry.950739082",
  what:        "entry.724583571",
  where:       "entry.1339994849",
  when:        "entry.2133718989",
  how:         "entry.464832105",
  note:        "entry.2091019514",

  // Aanrader: voeg in je Form óók een vraag "Scenario ID" toe (short answer, required),
  // dan kun je die hier koppelen:
  scenarioId:  "entry.1482083770" // <-- alleen gebruiken als je dit veld in Forms hebt
};

/**
 * ====== 3) SCENARIOS (2 plaatjes per tweetal kun je later automatiseren) ======
 * Zet je plaatjes in /images/ in je GitHub repo.
 */
const SCENARIOS = [
  { id:"S1", img:"images/img1.jpg", location:"Sporthal van der Knaap – Main entrance", time:"14:35" },
  { id:"S2", img:"images/img2.jpg", location:"Bioscoop Pathe – Parking lot", time:"09:10" },
  { id:"S3", img:"images/img3.jpg", location:"AH Stadspoort supermarket – Aisle 4", time:"18:22" },
  { id:"S4", img:"images/img4.jpg", location:"Castle Hoekelum – Near the lake", time:"12:05" },
];

// kies scenario (hier: altijd S1, maar je kunt random maken)
const active = SCENARIOS[0];

// inject scenario info in UI + prefill where/when
document.getElementById("scenarioImg").src = active.img;
document.getElementById("givenLocation").textContent = active.location;
document.getElementById("givenTime").textContent = active.time;
document.getElementById("scenarioId").value = active.id;
document.getElementById("where").value = active.location;
document.getElementById("when").value = active.time;

document.getElementById("reportForm").addEventListener("submit", (e) => {
  e.preventDefault();

  const msg = document.getElementById("msg");
  const btn = document.getElementById("submitBtn");

  // Maak FormData met de GOOGLE FORMS entry keys
  const data = new FormData();
  data.append(ENTRY.studentName, document.getElementById("studentName").value.trim());
  data.append(ENTRY.who,         document.getElementById("who").value.trim());
  data.append(ENTRY.what,        document.getElementById("what").value.trim());
  data.append(ENTRY.where,       document.getElementById("where").value.trim());
  data.append(ENTRY.when,        document.getElementById("when").value.trim());
  data.append(ENTRY.how,         document.getElementById("how").value.trim());
  data.append(ENTRY.note,        document.getElementById("note").value.trim());

  // Alleen toevoegen als je dit veld echt in je Form hebt gemaakt:
  if (ENTRY.scenarioId && ENTRY.scenarioId.includes("entry.")) {
    data.append(ENTRY.scenarioId, document.getElementById("scenarioId").value);
  }

  btn.disabled = true;
  msg.innerHTML = "Submitting…";

  // no-cors: je krijgt geen response terug, maar het wordt wel opgeslagen in Sheets
  fetch(`https://docs.google.com/forms/d/e/${FORM_ID}/formResponse`, {
    method: "POST",
    mode: "no-cors",
    body: data
  });

  msg.innerHTML = `<span class="ok">✔ Submitted</span>`;
  btn.disabled = false;

  // optioneel: leegmaken (maar WHERE/WHEN weer invullen)
  e.target.reset();
  document.getElementById("where").value = active.location;
  document.getElementById("when").value = active.time;
});
</script>
</body>
</html>
