<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Short Report Trainer</title>

  <style>
    body {
      margin: 0;
      background: #0b1220;
      color: #e9eefc;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .wrap { max-width: 980px; margin: 0 auto; padding: 18px; }
    .card { background:#111b33; border-radius:14px; padding:16px; }

    .topbar {
      display:flex; gap:12px; align-items:center;
      justify-content:space-between; margin-bottom:12px;
    }
    .badge {
      background:#1a2a55; padding:6px 12px;
      border-radius:999px; font-weight:900;
    }
    .progress {
      flex:1; height:10px; background:#2a355c;
      border-radius:999px; overflow:hidden;
    }
    .progress div { height:100%; background:#7aa2ff; width:0%; }

    .scenarioHeader {
      background:rgba(122,162,255,.1);
      border-radius:12px; padding:12px; margin-bottom:12px;
    }
    .scenarioHeader .big {
      text-align:center; font-size:20px; font-weight:900;
    }
    .line { text-align:center; margin-top:8px; font-size:17px; }
    .label { font-weight:500; }
    .value { font-weight:900; }

    .grid { display:grid; grid-template-columns:1.1fr .9fr; gap:14px; }
    @media (max-width:860px){ .grid{grid-template-columns:1fr;} }

    img { width:100%; border-radius:12px; }

    label { display:block; margin-top:10px; font-weight:800; }
    input, textarea {
      width:100%; padding:10px; border-radius:10px;
      background:#0b1220; color:#e9eefc;
      border:1px solid #334;
    }

    .row { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    @media (max-width:540px){ .row{grid-template-columns:1fr;} }

    button {
      margin-top:14px; padding:10px;
      border-radius:12px; font-weight:900;
      background:#7aa2ff; border:0; cursor:pointer;
    }

    .hint, .error, .ok {
      margin-top:10px; padding:10px;
      border-radius:10px; display:none;
    }
    .hint { background:rgba(255,205,117,.15); }
    .error { background:rgba(255,90,90,.2); }
    .ok { background:rgba(100,255,160,.2); }

    .footer { font-size:12px; opacity:.75; margin-top:8px; }
    code { background:#1a2a55; padding:2px 6px; border-radius:6px; }
  </style>
</head>

<body>
<div class="wrap">

  <div class="topbar">
    <div class="badge" id="scenarioBadge">Scenario 1 van 8</div>
    <div class="progress"><div id="progressBar"></div></div>
    <div class="badge" id="progressText">1 / 8</div>
  </div>

  <div class="card">
    <div class="scenarioHeader">
      <div class="big" id="scenarioTitle">Scenario</div>
      <div class="line">
        <span class="label">Gegeven locatie:</span>
        <span class="value" id="givenLocation"></span>
      </div>
      <div class="line">
        <span class="label">Gegeven datum/tijd:</span>
        <span class="value" id="givenDateTime"></span>
      </div>
    </div>

    <div class="grid">
      <img id="scenarioImg" src="" alt="Scenario">

      <form id="form">
        <label>Naam student(en)</label>
        <input id="student">

        <label>WHO (Callsign)</label>
        <input id="who">

        <label>WHAT</label>
        <input id="what" placeholder="Hoofdgroep, tekst, grootte, kleur">

        <div class="row">
          <div>
            <label>WHERE (MGRS)</label>
            <input id="where">
            <div class="hint" id="mgrsHint"></div>
          </div>
          <div>
            <label>WHEN (DTG)</label>
            <input id="when">
            <div class="hint" id="dtgHint">
              Formaat: <code>DDHHMM(A|B) MON JJ</code><br>
              Voorbeeld: <code>251435A JAN 26</code>
            </div>
          </div>
        </div>

        <label>HOW</label>
        <input id="how" placeholder="Naderingsroute, markering, contactpersoon">

        <label>NOTE (optioneel)</label>
        <textarea id="note"></textarea>

        <button type="submit">Versturen & volgende</button>

        <div class="error" id="error"></div>
        <div class="ok" id="ok"></div>
      </form>
    </div>
  </div>
</div>

<script>
/* CONFIG */
const FORM_ACTION = "https://docs.google.com/forms/d/e/1FAIpQLSe3-GOHTC225b7tcRCHNH5xK9X0lNplRsGfmlQcL_1pMVhcqA/formResponse";

const MONTHS_NL = ["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"];
const MONTHS_EN = ["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];

/* SCENARIOS (met jouw definitieve MGRS) */
const SCENARIOS = [
  {id:"S1",img:"images/img1.jpg",loc:"Topsporthal Van der Knaap – hoofdingang",d:"2026-01-25",t:"14:35",tz:"A",mgrs:"31U FT 8301 6636"},
  {id:"S2",img:"images/img2.jpg",loc:"Pathé Ede – parkeerplaats",d:"2026-06-12",t:"09:10",tz:"B",mgrs:"31U FT 8174 6614"},
  {id:"S3",img:"images/img3.jpg",loc:"Stadspoort – parkeerplaats",d:"2026-03-03",t:"18:22",tz:"A",mgrs:"31U FT 8197 6629"},
  {id:"S4",img:"images/img4.jpg",loc:"Kasteel Hoekelum – zuidkant meer",d:"2026-05-09",t:"12:05",tz:"B",mgrs:"31U FT 8372 6611"},
  {id:"S5",img:"images/img5.jpg",loc:"Ziekenhuis Gelderse Vallei – hoofdingang",d:"2026-02-14",t:"07:50",tz:"A",mgrs:"31U FT 8156 6680"},
  {id:"S6",img:"images/img6.jpg",loc:"Zwembad De Peppel – ingang",d:"2026-07-21",t:"16:40",tz:"B",mgrs:"31U FT 8132 6842"},
  {id:"S7",img:"images/img7.jpg",loc:"Oude Kerk – Grotestraat",d:"2026-11-08",t:"10:15",tz:"A",mgrs:"31U FT 8317 6953"},
  {id:"S8",img:"images/img8.jpg",loc:"Station Ede-Wageningen – nieuwe locatie",d:"2026-08-30",t:"20:05",tz:"B",mgrs:"31U FT 8353 6744"}
];

/* LOGICA */
let i=0, failDTG={}, failMGRS={};

function formatDateNL(d){
  const [y,m,da]=d.split("-");
  return `${da} ${MONTHS_NL[+m-1]} ${y}`;
}

function render(){
  const s=SCENARIOS[i];
  document.getElementById("scenarioTitle").textContent=`Scenario ${s.id}`;
  document.getElementById("givenLocation").textContent=s.loc;
  document.getElementById("givenDateTime").textContent=`${formatDateNL(s.d)} ${s.t}`;
  document.getElementById("scenarioImg").src=s.img;

  document.getElementById("scenarioBadge").textContent=`Scenario ${i+1} van ${SCENARIOS.length}`;
  document.getElementById("progressText").textContent=`${i+1} / ${SCENARIOS.length}`;
  document.getElementById("progressBar").style.width=`${(i+1)/SCENARIOS.length*100}%`;

  document.getElementById("error").style.display="none";
  document.getElementById("ok").style.display="none";
  document.getElementById("mgrsHint").style.display=(failMGRS[s.id]>=2)?"block":"none";
  document.getElementById("dtgHint").style.display=(failDTG[s.id]>=2)?"block":"none";
}
render();

/* SUBMIT */
document.getElementById("form").onsubmit=e=>{
  e.preventDefault();
  const s=SCENARIOS[i];

  let ok=true;
  const when=document.getElementById("when").value.toUpperCase();
  const expectedDTG=`${s.d.slice(8,10)}${s.t.replace(":","")}${s.tz} ${MONTHS_EN[+s.d.slice(5,7)-1]} ${s.d.slice(2,4)}`;

  if(when!==expectedDTG){
    failDTG[s.id]=(failDTG[s.id]||0)+1;
    if(failDTG[s.id]<2){ ok=false; }
  }

  if(!document.getElementById("where").value.includes(s.mgrs.slice(0,7))){
    failMGRS[s.id]=(failMGRS[s.id]||0)+1;
    if(failMGRS[s.id]<2){ ok=false; }
  }

  if(!ok){
    document.getElementById("error").textContent="Controleer WHERE en/of WHEN.";
    document.getElementById("error").style.display="block";
    render();
    return;
  }

  document.getElementById("ok").textContent="Ingediend. Volgende scenario.";
  document.getElementById("ok").style.display="block";

  i++;
  if(i<SCENARIOS.length){ setTimeout(render,600); }
};
</script>
</body>
</html>
